**Название:** Редактирование существующей карточки пациента

**Действующие лица:** пользователь — врач, система — медицинское
приложение

**Предварительные условия:**

- врач авторизирован в системе

- карточка пациента существует в системе

- у пользователя есть права на редактирование карточки пациента

**Успешный сценарий:**

1.  Пользователь нажимает на кнопку «Мои пациенты»

2.  Приложение отображает список всех пациентов, право на редактирование
    которых имеет пользователь

3.  Пользователь выбирает необходимого пациента из списка и нажимает на
    кнопку «Редактировать»

4.  Система отображает форму для редактирования данных пациента

> Система предлагает пользователю изменить или оставить без изменения
> следующие данные (поля не могут быть пустыми):

- Фамилия

- Имя

- Отчество

- Пол

- Дата рождения

- Дата имплантации

- Данные о лечащем враче

- Диагноз

> И опциональные (могут быть пустыми):

- Адрес 1

- Адрес 2

- Телефон 1

- Телефон 2

- Данные о родственнике для связи

5.  Пользователь изменяет значения полей по необходимости

6.  Система отображает следующую страницу, где предлагает пользователю
    изменить номер нейростимулятора, которые будет использоваться
    пациентом

7.  Пользователь по необходимости вводит номер нейростимулятора

8.  Приложение отображает страницу с расположением электродов на теле и
    предлагает пользователю указать корректное расположение

9.  Пользователь по необходимости указывает корректное расположение
    электродов на теле (электроды могут быть неактивны)

10. Система отображает кнопку «Сохранить изменения»

11. Пользователь нажимает на кнопку «Сохранить изменения»

12. После сохранения карточка с пациентом отображается в списке
    существующих пациентов и может быть:

- отредактирована

- удалена

**Альтернативный сценарий:**

Пользователь вводит некорректные данные при изменении карточки и
пытается перейти на следующую страницу редактирования данных

1.  п.1 – п. 4 аналогичны

2.  Пользователь вводит не все необходимые данные или вводит данные
    некорректного формата и пытается перейти на следующую страницу

3.  Окна, данные в которых оказались заполнены некорректно
    (обязательные, необязательные, нейростимулятор), помечаются красным,
    пользователя принудительно переводит на первую форму с некорректно
    заполненными данными

4.  Пользователь заполняет некорректно заполненные поля корректными
    данными и нажимает кнопку «Далее»

5.  Система отображает следующую страницу, на которой пользователь
    продолжает редактировать данные о пациенте

6.  Приложение отображает кнопку сохранения изменений в карточке
    пациента

7.  Пользователь нажимает на кнопку «Сохранить изменения»

8.  После сохранения карточка с новым пациентом отображается в списке
    существующих пациентов и может быть:

- отредактирована

- удалена

**Альтернативный сценарий:**

Пользователь во время редактирования карточки пациента решает изменить
информацию, заполненную на предыдущей странице (данные из п.4, п.6, п.8)

- п.1—п.9 аналогичны

- Во время п.5—п.9 пользователь может нажать на кнопку «Назад» на
  планшете и перейти на предыдущую страницу

- При возвращении «Назад» на предыдущую страницу на странице система
  отображает данные, которые уже были введены врачом

- Пользователь может их отредактировать и снова перейти на следующую
  страницу, где тоже сохранены данные, если они уже были заполнены

- п.10—п.12 аналогичны

**Альтернативный сценарий:**

Врач во время создания карточки с новыми пациентом по каким-либо
причинам решает отменить создание карточки

- п.1—п.9 аналогичны

- Во время любого из п.4-9 врач может быть нажать на кнопку «назад» на
  планшете

- При нахождении на п.5—п.9 аналогичен предыдущий сценарий

- При нахождении на п.4 при нажатии кнопки «назад» система выводит
  диалоговое окно, требующее подтверждение пользователя, действительно
  ли он желает прекратить редактирование карточки пациента

- Если пользователь нажимает на кнопку «Подтвердить», то приложение
  отображает список пациентов (п. 2)

- Если пользователь нажимает кнопку «Отмена», он остается на окне с
  вводом информации для редактирования карточки пациента
